!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function i(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var e="qor.widget",o="enable."+e,n="disable."+e,r="click."+e,a=".js-widget-button, .qor-slideout__close";return i.prototype={constructor:i,init:function(){this.$element;this.bind(),this.initStatus()},bind:function(){this.$element.on(r,t.proxy(this.click,this))},initStatus:function(){t("body").append('<iframe id="qor-widget-iframe" src="/admin/widget_instances/frontend-edit"></iframe>')},click:function(i){var e=t(i.target);i.stopPropagation(),e.is(a)&&(t("#qor-widget-iframe").contents().find(".js-widget-edit-link").attr("data-url",e.data("url")),t("#qor-widget-iframe").addClass("show"))}},i.plugin=function(o){return this.each(function(){var n,r=t(this),a=r.data(e);if(!a){if(/destroy/.test(o))return;r.data(e,a=new i(this,o))}"string"==typeof o&&t.isFunction(n=a[o])&&n.apply(a)})},i.isScrollToBottom=function(t){return t.clientHeight+t.scrollTop===t.scrollHeight},t(function(){t("body").attr("data-toggle","qor.widgets");var e='style="background-color: rgb(33,150,243); color: white; border: none; box-shadow: 0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12); padding: 6px 16px; display: inline-block; font-family: "Roboto","Helvetica","Arial",sans-serif; font-size: 14px; font-weight: 500;"';t(".qor-widget").each(function(i,o){var n=t(o).find("*").eq(0);n.css("position","relative").addClass("qor-widget").attr("data-url",t(o).data("url")).unwrap(),n.append('<div style="position: absolute; top: 8px; right: 8px;" class="qor-widget-embed-wrapper"><button '+e+' data-url="'+t(o).data("url")+'" class="js-widget-button">Edit Widget</button></div>')}),window.closeWidgetEditBox=function(){t("#qor-widget-iframe").removeClass("show"),t("#qor-widget-iframe")[0].contentWindow.location.reload()};var r='[data-toggle="qor.widgets"]';t(document).on(n,function(e){i.plugin.call(t(r,e.target),"destroy")}).on(o,function(e){i.plugin.call(t(r,e.target))}).triggerHandler(o)}),i});